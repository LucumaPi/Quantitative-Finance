\hypertarget{MultiAssetFactory_8hh_source}{}\doxysection{Multi\+Asset\+Factory.\+hh}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001 \textcolor{comment}{// MultiAssetFactory.hpp}}
\DoxyCodeLine{00002 \textcolor{comment}{//}}
\DoxyCodeLine{00003 \textcolor{comment}{// Application of Factory Method pattern to create}}
\DoxyCodeLine{00004 \textcolor{comment}{// 2-\/factor asset payout functions.}}
\DoxyCodeLine{00005 \textcolor{comment}{//}}
\DoxyCodeLine{00006 \textcolor{comment}{// In this case we use an integer identifier (GOF page 110-\/111). This}}
\DoxyCodeLine{00007 \textcolor{comment}{// is handy and extendible. The actual data for the object is via console}}
\DoxyCodeLine{00008 \textcolor{comment}{// but we could use a Bridge at a later stage.}}
\DoxyCodeLine{00009 \textcolor{comment}{//}}
\DoxyCodeLine{00010 \textcolor{comment}{// Code is inline in this version.}}
\DoxyCodeLine{00011 \textcolor{comment}{//}}
\DoxyCodeLine{00012 \textcolor{comment}{// (C) Datasim Education BV 2006}}
\DoxyCodeLine{00013 \textcolor{comment}{//}}
\DoxyCodeLine{00014 }
\DoxyCodeLine{00015 \textcolor{preprocessor}{\#ifndef MultiAssetFactory\_HH}}
\DoxyCodeLine{00016 \textcolor{preprocessor}{\#define MultiAssetFactory\_HH}}
\DoxyCodeLine{00017 }
\DoxyCodeLine{00018 \textcolor{preprocessor}{\#include "MultiAssetPayoffStrategy.hh"}}
\DoxyCodeLine{00019 \textcolor{preprocessor}{\#include <string>}}
\DoxyCodeLine{00020 \textcolor{preprocessor}{\#include <map>}}
\DoxyCodeLine{00021 \textcolor{preprocessor}{\#include <iostream>}}
\DoxyCodeLine{00022 }
\DoxyCodeLine{\Hypertarget{MultiAssetFactory_8hh_source_l00023}\mbox{\hyperlink{classMultiAssetFactory}{00023}} \textcolor{keyword}{class }\mbox{\hyperlink{classMultiAssetFactory}{MultiAssetFactory}}}
\DoxyCodeLine{00024 \{}
\DoxyCodeLine{00025 \textcolor{keyword}{public}:}
\DoxyCodeLine{00026         \mbox{\hyperlink{classMultiAssetFactory}{MultiAssetFactory}}()}
\DoxyCodeLine{00027         \{}
\DoxyCodeLine{00028             desc = std::map<int, std::string>();}
\DoxyCodeLine{00029 }
\DoxyCodeLine{00030             desc.insert(std::pair<int, std::string>(1, \textcolor{stringliteral}{"Exchange option\(\backslash\)n"}));}
\DoxyCodeLine{00031             desc.insert(std::pair<int, std::string>(2, \textcolor{stringliteral}{"Rainbow option\(\backslash\)n"}));}
\DoxyCodeLine{00032             desc.insert(std::pair<int, std::string>(3, \textcolor{stringliteral}{"Basket option\(\backslash\)n"}));}
\DoxyCodeLine{00033             desc.insert(std::pair<int, std::string>(4, \textcolor{stringliteral}{"BestWorst option\(\backslash\)n"}));}
\DoxyCodeLine{00034             desc.insert(std::pair<int, std::string>(5, \textcolor{stringliteral}{"Quotient option\(\backslash\)n"}));}
\DoxyCodeLine{00035             desc.insert(std::pair<int, std::string>(6, \textcolor{stringliteral}{"Quanto option\(\backslash\)n"}));}
\DoxyCodeLine{00036             desc.insert(std::pair<int, std::string>(7, \textcolor{stringliteral}{"SpreadStrategy option\(\backslash\)n"}));}
\DoxyCodeLine{00037             desc.insert(std::pair<int, std::string>(8, \textcolor{stringliteral}{"Dual Strike Strategy option\(\backslash\)n"}));}
\DoxyCodeLine{00038             desc.insert(std::pair<int, std::string>(9, \textcolor{stringliteral}{"Out Perfomance option\(\backslash\)n"}));}
\DoxyCodeLine{00039         \}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041         \textcolor{keyword}{virtual} \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* create(\textcolor{keywordtype}{int} N)}
\DoxyCodeLine{00042         \{}
\DoxyCodeLine{00043 }
\DoxyCodeLine{00044             \textcolor{keywordflow}{if} (N == 1) \textcolor{keywordflow}{return} CreateExchangeStrategy();}
\DoxyCodeLine{00045             \textcolor{keywordflow}{if} (N == 2) \textcolor{keywordflow}{return} CreateRainbowStrategy();}
\DoxyCodeLine{00046             \textcolor{keywordflow}{if} (N == 3) \textcolor{keywordflow}{return} CreateBasketStrategy();}
\DoxyCodeLine{00047             \textcolor{keywordflow}{if} (N == 4) \textcolor{keywordflow}{return} CreateBestWorstStrategy();}
\DoxyCodeLine{00048             \textcolor{keywordflow}{if} (N == 5) \textcolor{keywordflow}{return} CreateQuotientStrategy();}
\DoxyCodeLine{00049             \textcolor{keywordflow}{if} (N == 6) \textcolor{keywordflow}{return} CreateQuantoStrategy();}
\DoxyCodeLine{00050             \textcolor{keywordflow}{if} (N == 7) \textcolor{keywordflow}{return} CreateSpreadStrategy();}
\DoxyCodeLine{00051             \textcolor{keywordflow}{if} (N == 8) \textcolor{keywordflow}{return} CreateDualStrikeStrategy();}
\DoxyCodeLine{00052             \textcolor{keywordflow}{if} (N == 9) \textcolor{keywordflow}{return} CreateOutPerformanceStrategy();}
\DoxyCodeLine{00053 }
\DoxyCodeLine{00054             \textcolor{comment}{// Exception}}
\DoxyCodeLine{00055             \textcolor{keywordflow}{if} (N > 9 || N < 1)}
\DoxyCodeLine{00056             \{}
\DoxyCodeLine{00057                 \textcolor{keywordflow}{throw} std::string(\textcolor{stringliteral}{"Outside range\(\backslash\)n"});}
\DoxyCodeLine{00058             \}}
\DoxyCodeLine{00059         \}}
\DoxyCodeLine{00060 }
\DoxyCodeLine{00061         \textcolor{keywordtype}{void} display()}
\DoxyCodeLine{00062         \{ \textcolor{comment}{// Show options for a choice}}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064             std::map<int, std::string>:: const\_iterator it;}
\DoxyCodeLine{00065 }
\DoxyCodeLine{00066             \textcolor{keywordflow}{for} (it = desc.begin(); it != desc.end(); it++)}
\DoxyCodeLine{00067             \{}
\DoxyCodeLine{00068                 std::cout << (*it).first << \textcolor{stringliteral}{", "} << (*it).second << std::endl;}
\DoxyCodeLine{00069             \}}
\DoxyCodeLine{00070         \}}
\DoxyCodeLine{00071 }
\DoxyCodeLine{00072 \textcolor{keyword}{private}:}
\DoxyCodeLine{00073 }
\DoxyCodeLine{00074         std::map<int, std::string> desc;    \textcolor{comment}{// Description}}
\DoxyCodeLine{00075 }
\DoxyCodeLine{00076 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateExchangeStrategy()}
\DoxyCodeLine{00077 \{}
\DoxyCodeLine{00078     std::cout << desc[1];}
\DoxyCodeLine{00079 }
\DoxyCodeLine{00080     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classExchangeStrategy}{ExchangeStrategy}};}
\DoxyCodeLine{00081 \}}
\DoxyCodeLine{00082 }
\DoxyCodeLine{00083 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateRainbowStrategy()}
\DoxyCodeLine{00084 \{}
\DoxyCodeLine{00085     std::cout << desc[2];}
\DoxyCodeLine{00086 }
\DoxyCodeLine{00087     std::cout << \textcolor{stringliteral}{"Strike K: "}; \textcolor{keywordtype}{double} K; std::cin >> K;}
\DoxyCodeLine{00088     std::cout << \textcolor{stringliteral}{"Call +1, Put -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00089     std::cout << \textcolor{stringliteral}{"Max(max) 1 or Max(min) 2: "}; \textcolor{keywordtype}{int} type; std::cin >> type;}
\DoxyCodeLine{00090 }
\DoxyCodeLine{00091     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classRainbowStrategy}{RainbowStrategy}}(K, w, type);}
\DoxyCodeLine{00092 \}}
\DoxyCodeLine{00093 }
\DoxyCodeLine{00094 }
\DoxyCodeLine{00095 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateBasketStrategy()}
\DoxyCodeLine{00096 \{}
\DoxyCodeLine{00097     std::cout << desc[3];}
\DoxyCodeLine{00098 }
\DoxyCodeLine{00099 L1:}
\DoxyCodeLine{00100     std::cout << \textcolor{stringliteral}{"Strike K: "}; \textcolor{keywordtype}{double} K; std::cin >> K;}
\DoxyCodeLine{00101     std::cout << \textcolor{stringliteral}{"Call +1, Put -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00102     std::cout << \textcolor{stringliteral}{"First weight: "}; \textcolor{keywordtype}{double} w1; std::cin >> w1;}
\DoxyCodeLine{00103     std::cout << \textcolor{stringliteral}{"Second weight: "}; \textcolor{keywordtype}{double} w2; std::cin >> w2;}
\DoxyCodeLine{00104     \textcolor{keywordflow}{if} (w1 + w2 != 1.0)}
\DoxyCodeLine{00105     \{}
\DoxyCodeLine{00106         std::cout << \textcolor{stringliteral}{"Weights must add up to 1"};}
\DoxyCodeLine{00107         \textcolor{keywordflow}{goto} L1;}
\DoxyCodeLine{00108     \}}
\DoxyCodeLine{00109 }
\DoxyCodeLine{00110     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classBasketStrategy}{BasketStrategy}}(K, w, w1, w2);}
\DoxyCodeLine{00111 }
\DoxyCodeLine{00112 \}}
\DoxyCodeLine{00113 }
\DoxyCodeLine{00114 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateBestWorstStrategy()}
\DoxyCodeLine{00115 \{}
\DoxyCodeLine{00116     std::cout << desc[4];}
\DoxyCodeLine{00117 }
\DoxyCodeLine{00118     std::cout << \textcolor{stringliteral}{"Strike(cash) K: "}; \textcolor{keywordtype}{double} K; std::cin >> K;}
\DoxyCodeLine{00119     std::cout << \textcolor{stringliteral}{"Best +1, Worst -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00120 }
\DoxyCodeLine{00121     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classBestWorstStrategy}{BestWorstStrategy}}(K, w);}
\DoxyCodeLine{00122 \}}
\DoxyCodeLine{00123 }
\DoxyCodeLine{00124 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateQuotientStrategy()}
\DoxyCodeLine{00125 \{}
\DoxyCodeLine{00126 }
\DoxyCodeLine{00127     std::cout << desc[5];}
\DoxyCodeLine{00128 }
\DoxyCodeLine{00129     std::cout << \textcolor{stringliteral}{"Strike K: "}; \textcolor{keywordtype}{double} K; std::cin >> K;}
\DoxyCodeLine{00130     std::cout << \textcolor{stringliteral}{"Call +1, Put -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00131 }
\DoxyCodeLine{00132     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classQuotientStrategy}{QuotientStrategy}}(K, w);}
\DoxyCodeLine{00133 \}}
\DoxyCodeLine{00134 }
\DoxyCodeLine{00135 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateQuantoStrategy()}
\DoxyCodeLine{00136 \{}
\DoxyCodeLine{00137     std::cout << desc[6];}
\DoxyCodeLine{00138 }
\DoxyCodeLine{00139     std::cout << \textcolor{stringliteral}{"Strike K in foreign currency: "}; \textcolor{keywordtype}{double} K; std::cin >> K;}
\DoxyCodeLine{00140     std::cout << \textcolor{stringliteral}{"Fixed exchange rate: "}; \textcolor{keywordtype}{double} fer; std::cin >> fer;}
\DoxyCodeLine{00141     std::cout << \textcolor{stringliteral}{"Call +1, Put -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00142 }
\DoxyCodeLine{00143     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classQuantoStrategy}{QuantoStrategy}}(K, w, fer);}
\DoxyCodeLine{00144 \}}
\DoxyCodeLine{00145 }
\DoxyCodeLine{00146 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateSpreadStrategy()}
\DoxyCodeLine{00147 \{}
\DoxyCodeLine{00148     std::cout << desc[7];}
\DoxyCodeLine{00149 }
\DoxyCodeLine{00150     std::cout << \textcolor{stringliteral}{"Strike K: "}; \textcolor{keywordtype}{double} K; std::cin >> K;}
\DoxyCodeLine{00151     std::cout << \textcolor{stringliteral}{"Call +1, Put -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00152     std::cout << \textcolor{stringliteral}{"Value 'a' > 0: "}; \textcolor{keywordtype}{double} a; std::cin >> a;}
\DoxyCodeLine{00153     std::cout << \textcolor{stringliteral}{"Value 'b' < 0: "}; \textcolor{keywordtype}{double} b; std::cin >> b;}
\DoxyCodeLine{00154 }
\DoxyCodeLine{00155     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classSpreadStrategy}{SpreadStrategy}}(w, K, a, b);}
\DoxyCodeLine{00156 }
\DoxyCodeLine{00157 \}}
\DoxyCodeLine{00158 }
\DoxyCodeLine{00159 }
\DoxyCodeLine{00160 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateDualStrikeStrategy()}
\DoxyCodeLine{00161 \{}
\DoxyCodeLine{00162 }
\DoxyCodeLine{00163     std::cout << desc[8];}
\DoxyCodeLine{00164 }
\DoxyCodeLine{00165 }
\DoxyCodeLine{00166     std::cout << \textcolor{stringliteral}{"Strike K1: "}; \textcolor{keywordtype}{double} K1; std::cin >> K1;}
\DoxyCodeLine{00167     std::cout << \textcolor{stringliteral}{"Option1: Call  +1, Put -\/1: "}; \textcolor{keywordtype}{double} w1; std::cin >> w1;}
\DoxyCodeLine{00168 }
\DoxyCodeLine{00169     std::cout << \textcolor{stringliteral}{"Strike K2: "}; \textcolor{keywordtype}{double} K2; std::cin >> K2;}
\DoxyCodeLine{00170     std::cout << \textcolor{stringliteral}{"Option2: Call  +1, Put -\/1: "}; \textcolor{keywordtype}{double} w2; std::cin >> w2;}
\DoxyCodeLine{00171 }
\DoxyCodeLine{00172     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classDualStrikeStrategy}{DualStrikeStrategy}}(K1, K2, w1, w2);}
\DoxyCodeLine{00173 }
\DoxyCodeLine{00174     }
\DoxyCodeLine{00175 \}}
\DoxyCodeLine{00176 }
\DoxyCodeLine{00177 }
\DoxyCodeLine{00178 \mbox{\hyperlink{classMultiAssetPayoffStrategy}{MultiAssetPayoffStrategy}}* CreateOutPerformanceStrategy()}
\DoxyCodeLine{00179 \{}
\DoxyCodeLine{00180 }
\DoxyCodeLine{00181     std::cout << desc[9];}
\DoxyCodeLine{00182 }
\DoxyCodeLine{00183 }
\DoxyCodeLine{00184     std::cout << \textcolor{stringliteral}{"Underlying I1: "}; \textcolor{keywordtype}{double} I1; std::cin >> I1;}
\DoxyCodeLine{00185     std::cout << \textcolor{stringliteral}{"Underlying I2: "}; \textcolor{keywordtype}{double} I2; std::cin >> I2;}
\DoxyCodeLine{00186     std::cout << \textcolor{stringliteral}{"Strike rate of option: "}; \textcolor{keywordtype}{double} k; std::cin >> k;}
\DoxyCodeLine{00187     std::cout << \textcolor{stringliteral}{"Call  +1, Put -\/1: "}; \textcolor{keywordtype}{double} w; std::cin >> w;}
\DoxyCodeLine{00188 }
\DoxyCodeLine{00189     \textcolor{keywordflow}{return} \textcolor{keyword}{new} \mbox{\hyperlink{classOutPerformanceStrategy}{OutPerformanceStrategy}}(I1, I2, w, k);}
\DoxyCodeLine{00190 }
\DoxyCodeLine{00191 \}}
\DoxyCodeLine{00192 }
\DoxyCodeLine{00193 \};}
\DoxyCodeLine{00194 }
\DoxyCodeLine{00195 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
